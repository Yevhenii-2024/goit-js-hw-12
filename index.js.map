{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const DOM_TREE = {\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    showMore: document.querySelector('[data-showMore]'),\n    form: document.querySelector('.form')\n}\n\nconst lightBox = new SimpleLightbox('.gallery a', {\n    navText: ['←', '→'],\n    captionsData: 'alt',\n    captionDelay: '250'\n});\n\nexport function createMarkup(array) {\n    const markUp = array\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => {\n            return `\n         <li class=\"card\">\n              <a href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" />\n            <ul class=\"img-info\">\n               <li class=\"text\"><span class=\"bold\">Likes</span>${likes}</li>\n               <li class=\"text\"><span class=\"bold\">Views</span>${views}</li>\n               <li class=\"text\"><span class=\"bold\">Comments</span>${comments}</li>\n               <li class=\"text\"><span class=\"bold\">Downloads</span>${downloads}</li>\n            </ul>\n            </a>\n        </li>\n            `;\n        }).join('');\n    DOM_TREE.gallery.insertAdjacentHTML('beforeend', markUp);\n    lightBox.refresh();\n}\n\nexport function clearGallery() {\n    DOM_TREE.gallery.innerHTML = '';\n} \n\nexport function showLoader() {\n    DOM_TREE.loader.style.display = 'block';\n}\n\nexport function pickUpLoader() {\n    DOM_TREE.loader.style.display = 'none';\n}\n\nexport function showMoreButton() {\n    DOM_TREE.showMore.classList.remove('visually-hidden');\n}\n\nexport function pickUpShowMoreButton() {\n    DOM_TREE.showMore.classList.add('visually-hidden');\n}","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport async function getRequest(searchData, page) {\n    const response = await axios.get(`https://pixabay.com/api/`, {\n    params: {\n      key: '49667356-c9b78f361687dff4f3855c0b0',\n      q: searchData,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15\n    }\n  });\n  return response.data;\n}\n\nexport function messageError(message) {\n    iziToast.show({\n        title: `${message}`,\n        titleColor: 'white',\n        messageColor: 'white',\n        backgroundColor: 'red',\n        position: 'topRight'\n});\n}","import * as render from './js/render-functions';\nimport { getRequest, messageError } from './js/pixabay-api';\nimport { DOM_TREE } from './js/render-functions';\n\n\nDOM_TREE.form.addEventListener('submit', handlerSubmit);\nDOM_TREE.showMore.addEventListener('click', showMoreHandler);\n\nlet page = 1;\nlet searchData = '';\nconst PER_PAGE = 15;\n\nfunction handlerSubmit(event) {\n    event.preventDefault();\n    searchData = this.elements['search-text'].value.trim();\n    resetInput();\n    if (!searchData) {\n        messageError('Enter correct data, please');\n        return;\n    }\n    requestGallery();\n}\n\nasync function requestGallery() {\n    render.showLoader();\n    try {\n        const response = await getRequest(searchData, page);\n        checkData(response.totalHits);\n        render.createMarkup(response.hits);\n        checkMore(response);\n    } catch (error) {\n        if (error.message === 'no item') {\n            return;\n        }\n        messageError(error.message);\n    } finally {\n        render.pickUpLoader();\n    }\n    \n}\n\nasync function showMoreHandler() {\n    render.pickUpShowMoreButton();\n    render.showLoader();\n    page++;\n    DOM_TREE.showMore.disabled = true;\n    try {\n        const response = await getRequest(searchData, page);\n        render.createMarkup(response.hits);\n        DOM_TREE.showMore.disabled = false;\n        checkMore(response);\n        scrollPage();\n    } catch (error) {\n        messageError(error.message);\n    } finally { \n        render.pickUpLoader();\n    }\n}\n\nfunction resetInput() {\n  render.pickUpShowMoreButton();\n  render.clearGallery();\n  page = 1;\n  DOM_TREE.form.reset();\n}\n\nfunction checkData(data) {\n  if (!data) {\n    messageError('Sorry, there are no images matching your search query. Please try again!');\n    render.pickUpLoader();\n    throw new Error('no item');\n  }\n}\n\nfunction checkMore(response) {\n  if (Math.ceil(response.totalHits / PER_PAGE) === page) {\n    showError(\"We're sorry, but you've reached the end of search results.\", '0e9c79');\n    return;\n  }\n  render.showMoreButton();\n}\n\nfunction scrollPage() {\n  const height = DOM_TREE.gallery.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["DOM_TREE","lightBox","SimpleLightbox","createMarkup","array","markUp","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","pickUpLoader","showMoreButton","pickUpShowMoreButton","getRequest","searchData","page","axios","messageError","message","iziToast","handlerSubmit","showMoreHandler","PER_PAGE","event","resetInput","requestGallery","render.showLoader","response","checkData","render.createMarkup","checkMore","error","render.pickUpLoader","render.pickUpShowMoreButton","scrollPage","render.clearGallery","data","render.showMoreButton","height"],"mappings":"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"}